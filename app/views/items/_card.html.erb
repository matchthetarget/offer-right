<div class="card">
  <%= cl_image_tag @item.image, class: "img-fluid" %>
  <div class="card-body">
    <h5 class="card-title"><%= item.title %> - <%= number_to_currency item.price %></h5>
    <p class="card-text"><small class="text-muted">Posted <%= time_ago_in_words(item.created_at) %> ago</small></p>
    <p class="card-text d-flex justify-content-between"><%= link_to item.category, item.category %>
      <% if current_user == item.seller %>
        <div>
          <%= link_to edit_item_url(item), class: "btn btn-outline-secondary" do %>
            <i class="fas fa-edit"></i>
          <% end %>
          <%= link_to item, method: :delete, data: { confirm: "Do you really want to delete this item?" }, class: "btn btn-outline-secondary" do %>
            <i class="fas fa-trash-alt"></i>
          <% end %>
        </div>
        <% if item.buyer.present? %>
          <%= form_with(model: item, local: true, novalidate: true, class: "mb-3") do |f| %>
            <%= f.hidden_field :buyer_id, value: nil %>
            <%= f.button "Unmark #{item.buyer.name} as Buyer", class: "btn btn-outline-secondary" %>
          <% end %>
        <% end %>
      <% end %>
    </p>
  </div>
  <div class="media my-4 mx-1">
    <img src="https://images.fandango.com/cms/assets/a2f0b9d0-cf84-11eb-a507-3be98bb99253--actordefaulttmb.gif" class="mr-3 rounded-circle" alt="user-profile-picture">
    <div class="media-body">
      <%= link_to item.seller do %>
        <h5 class="mt-0 d-flex justify-content-between pr-5 text-decoration-none"><%= item.seller %><i class="fas fa-chevron-right"></i></h5>
        <p><small class="text-muted">Member since <%= item.seller.created_at.strftime("%B %Y") %></small></p>
      <% end %>
    </div>
  </div>
  <div class="card-body">
    <% if item.buyer.present? %>
    <h4>SOLD!</h4>
    <% end %>
    <p><%= item.description %></p>
    <dt>Location</dt>
    <dd>
      <div>
        <%= render partial: "items/one_photo_map" %>
      </div>
    </dd>
  </div>
</div>
